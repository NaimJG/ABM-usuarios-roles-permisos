<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Editar Rol</title>
</head>
<body>
  <h1>Editar Rol: <%= rol.nombre %></h1>

  <a href="/roles">‚Üê Volver a Roles</a>

  <form action="/roles/<%= rol._id %>/edit" method="POST">
    <h3>Permisos disponibles:</h3>

    <% permisos.forEach(permiso => { %>
      <div>
        <input
          type="checkbox"
          id="permiso_<%= permiso._id %>"
          name="permisos"
          value="<%= permiso._id %>"
          <%= rol.permisos.some(p => p._id.toString() === permiso._id.toString()) ? 'checked' : '' %>
        />
        <label for="permiso_<%= permiso._id %>"><%= permiso.nombre %></label>
      </div>
    <% }) %>

    <button type="submit">Guardar cambios</button>
  </form>

  <h3>Permisos actuales del rol:</h3>
  <% if (rol.permisos.length > 0) { %>
    <ul>
      <% rol.permisos.forEach(p => { %>
        <li><%= p.nombre %></li>
      <% }) %>
    </ul>
  <% } else { %>
    <p>Este rol no tiene permisos asignados.</p>
  <% } %>
</body>
</html>